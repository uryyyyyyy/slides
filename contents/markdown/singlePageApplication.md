
## SPAとは

画面遷移は全てクライアント側のみで行う。
サーバーとのやりとり（データの取得・更新）は、
WebAPIが用意されているのでそちらを使用して適宜最小限のデータ量で通信する。

データ通信のフォーマットはxmlかjsonだが、今はjsonが主流みたい。

---

## 今回作ったサンプル

[github](https://github.com/uryyyyyyy/simpleWebDevTool)

* クライアントサイドだけで開発できる。
	- gruntのタスクで２つのサーバーを同じHostに割り当ててる。
	- 一つは静的ファイルサーバー
	- もう一つは簡易なjson配信サーバーで、これをProxy挟んで同じportに載せる。

* 本番時は圧縮する。
	- 今では常識だが、結合＋圧縮でファイル転送コストを減らす。
	- もちろんただ圧縮するだけなので動作は変わらない。
	- （ただ、今回の例だとappRoute.jsが最初に読まれる前提）

---

## 得られるメリット

* Viewがフレームワークに依存しない
	- view(html)にデータの取り扱い用の書式（jspとか）を混在させなくていい。
	- サーバーとのやりとりもhttp/socket経由でシンプル
	- 設計する際にも、疎結合を強制できて変更に強くなる。

* 通信が分散する。
	- クライアントコードはただの静的ファイルなのでCDNとかで配信してもよい。
	- RESTfulなAPIを用意すれば、データの取得も並列化できる。
	- 一般に、サーバーの負荷も減るし、画面遷移が速くなる。

--

* 他システムとの連携が容易
	- APIさえ叩けば必要な情報が取得・更新できる。（もちろんValidationは必須だが）
	- APIが言語に依存しないので、Webアプリならほぼ使える。

---

## Q

--

### 大規模には向かないのでは？

→大規模にするとその分ファイルサイズが膨れ、
Single-Pageと呼ぶには重すぎるかもしれない。

が、そんなときはもう一つSPAを作ればいい。
どうせクライアントサイドなので処理の重複もないと思うし、
使うライブラリ群も違うだろうし。

--

### 複雑になりそう。

→うっかり名前空間がバッティングしたらカオスだけど、
そこさえ気をつければ問題ないのでは？

--

### サーバーサイドでレンダリングしたほうが速いのでは

→画面によってはそうだと思います。
ただ、そもそも一画面に何千件ものデータを表示する事自体が遅さの原因なので
画面を分割することを考えたい。

--

### ブラウザのメモリ食いそう

→食うと思います。
でもその分便利になるならいいのでは？
やりすぎてOoMになったらSPA×２に分割しましょう。


